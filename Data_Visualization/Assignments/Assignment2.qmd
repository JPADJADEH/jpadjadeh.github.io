---
title: "Assignment 2: R Graphics with Happy Planet Index"
author: "Your Name"
format: 
  html:
    code-fold: show
    toc: true
    toc-location: left
execute:
  warning: false
  message: false
---

# Assignment Overview

This assignment uses Paul Murrell's R graphics functions with the Happy Planet Index dataset from [http://happyplanetindex.org](http://happyplanetindex.org).

After working through murrell01.R, I learned that:

- `axis()` first parameter sets which side (1=bottom, 2=left, 3=top, 4=right)
- `cex` controls text and point size
- `par()` settings for margins and layout need to be reset after changes

# Data Import

```{r load-data}
# Load required library
library(readxl)

# Read HPI data from Excel file
hpi_data <- read_excel("HPI.xlsx")

# Extract variables for analysis
countries <- hpi_data$Country
hpi_scores <- hpi_data$HPI
life_expectancy <- hpi_data$`Life Expectancy (years)`
gdp <- hpi_data$`GDP per capita ($)`
population <- hpi_data$`Population (thousands)`

# Display first few rows
head(hpi_data[, c("Country", "HPI", "Life Expectancy (years)", "GDP per capita ($)")], 10)
```

# Plotting Functions with HPI Data

```{r hpi-plots}
#| fig-width: 12
#| fig-height: 10

# Set layout (3 rows, 2 columns)
par(mfrow=c(3, 2), bg="white")

# 1. Scatterplot with regression line
plot(hpi_scores, life_expectancy, pch=16, col="blue",
     xlab="HPI Score", ylab="Life Expectancy (years)",
     main="HPI vs Life Expectancy", cex=1.2)
abline(lm(life_expectancy ~ hpi_scores), col="red", lwd=2)

# 2. Histogram with density curve
hist(hpi_scores, col="lightblue", border="white",
     main="Distribution of HPI Scores", xlab="HPI Score", 
     freq=FALSE, breaks=10)
lines(density(hpi_scores, na.rm=TRUE), col="red", lwd=3)

# 3. Barplot (adapted from VADeaths example)
par(mar=c(2, 3.1, 2, 2.1))
hpi_matrix <- matrix(c(hpi_scores[1:5], 
                       life_expectancy[1:5]/2,
                       gdp[1:5]/2000,
                       population[1:5]/200), 
                     nrow=4, byrow=TRUE)
midpts <- barplot(hpi_matrix, 
                  col=c("wheat", "tan", "burlywood", "rosybrown"),
                  names=rep("", 5),
                  main="Top 5 Countries - Multiple Metrics")
mtext(countries[1:5], at=midpts, side=1, line=0.5, cex=0.6)
text(rep(midpts, each=4), 
     apply(hpi_matrix, 2, cumsum) - hpi_matrix/2,
     round(hpi_matrix, 1), 
     col=rep(c("black", "white"), times=c(2,2)), 
     cex=0.7)
par(mar=c(5.1, 4.1, 4.1, 2.1))

# 4. Boxplot comparison
par(mar=c(3, 4.1, 2, 0))
boxplot(list(HPI=hpi_scores, 
             LifeExp=life_expectancy,
             GDP=gdp/1000),
        col=c("lightblue", "lightcoral", "lightgreen"),
        main="Three Variables Comparison",
        ylab="Values (scaled)",
        names=c("HPI", "Life Exp", "GDP/1000"))
mtext("Variables", side=1, line=2, cex=0.8)
par(mar=c(5.1, 4.1, 4.1, 2.1))

# 5. 3D Surface
x <- seq(min(hpi_scores, na.rm=TRUE), max(hpi_scores, na.rm=TRUE), length=20)
y <- seq(min(life_expectancy, na.rm=TRUE), max(life_expectancy, na.rm=TRUE), length=20)
z <- outer(x, y, function(x,y) (x + y)/2)
par(mar=c(1, 1, 2, 1))
persp(x, y, z, theta=30, phi=20, col="lightblue", 
      shade=0.75, border=NA, 
      xlab="HPI", ylab="Life Exp", zlab="Combined",
      main="3D Surface")
par(mar=c(5.1, 4.1, 4.1, 2.1))

# 6. Pie Chart
par(mar=c(0, 2, 2, 2))
pie(hpi_scores[1:5], labels=countries[1:5],
    col=rainbow(5), main="Top 5 Countries by HPI",
    cex=0.8)
par(mar=c(5.1, 4.1, 4.1, 2.1))

# Reset layout
par(mfrow=c(1, 1))
```

# Key Functions

**par()** - Controls layout, margins, and colors

**plot(), points(), lines()** - Creates plots and adds points/lines

**axis(), box()** - Adds custom axes and borders

**text(), mtext()** - Adds labels in plot or margins

**hist()** - Makes histograms

**boxplot()** - Compares distributions

**persp()** - Creates 3D plots

**pie()** - Makes pie charts

# Conclusion

The scatterplot shows HPI and life expectancy are positively related. Most countries have HPI scores between 30-50. GDP varies more than HPI or life expectancy across countries.